# A股股价预测与量化分析 (Stock Prediction Demo)

这是一个基于 Python 机器学习的 A 股股价预测与量化分析演示项目。它利用 `AkShare` 获取 A 股历史数据，计算多种经典技术指标（如 MACD, RSI, 布林带等），并使用**随机森林 (Random Forest)** 算法构建回归模型，对未来的收盘价进行预测。

项目包含一个基于 **Streamlit** 的交互式 Web 界面，方便用户调整参数并直观地查看预测结果和技术图表。同时也支持命令行 (CLI) 模式运行。

## ✨ 功能特性

*   **数据获取**: 通过 [AkShare](https://github.com/akfamily/akshare) 接口实时拉取 A 股前复权日线数据。
*   **多因子特征工程**: 自动计算并整合多种技术指标作为模型输入：
    *   **趋势指标**: 移动平均线 (MA5/10/20/60)、MACD
    *   **震荡指标**: RSI (14日), KDJ (9-3-3)
    *   **波动率指标**: 布林带 (Bollinger Bands), ATR (14日)
    *   **滞后特征**: 历史收盘价滞后 (Lag 1/3/5)
*   **机器学习模型**: 使用 `RandomForestRegressor` 进行时间序列预测，支持特征重要性分析。
*   **交互式可视化**:
    *   **Web 端**: 使用 `Streamlit` + `Plotly` 实现交互式 K 线图、指标图和预测结果对比。
    *   **CLI 端**: 使用 `Matplotlib` + `Mplfinance` 生成静态分析图表。
*   **高度可配置**: 支持自定义股票代码、时间跨度、预测天数、模型参数等。

## 🛠️ 技术栈

*   **编程语言**: Python 3.12+
*   **数据源**: `akshare`
*   **数据处理**: `pandas`, `numpy`
*   **机器学习**: `scikit-learn`
*   **Web 框架**: `streamlit`
*   **可视化**: `plotly` (Web), `matplotlib`, `mplfinance` (CLI)
*   **依赖管理**: `uv` (推荐) 或 `pip`

## 🚀 快速开始

### 1. 环境准备

确保你的本地已安装 Python 3.12 或更高版本。

此项目使用 `uv` 进行依赖管理，但也支持标准的 `pip`。

### 2. 安装依赖

#### 方式 A: 使用 `uv` (推荐)
如果已安装 [uv](https://github.com/astral-sh/uv)，在项目根目录下直接同步环境：
```bash
uv sync
```

#### 方式 B: 使用 `pip`
直接从项目描述文件安装：
```bash
pip install .
```
*(注：如果需要开发调试，可以使用 `pip install -e .` 以可编辑模式安装)*

### 3. 运行应用

#### 🖥️ 启动 Web 界面 (Streamlit)
这是最推荐的使用方式，提供完整的可视化交互。
```bash
streamlit run app.py
```
启动后，浏览器会自动打开 `http://localhost:8501`。你可以在左侧边栏配置：
*   **股票代码**: 输入 6 位 A 股代码（如 `000001`）。
*   **日期范围**: 选择训练数据的起止时间。
*   **预测天数**: 预测未来第 N 天的收盘价。
*   **模型参数**: 调整随机森林的树数量等。

## 📂 项目结构

```
.
├── app.py              # Streamlit Web 应用入口
├── main.py             # 核心逻辑：数据获取、特征工程、模型训练、CLI 入口
├── pyproject.toml      # 项目配置与依赖定义
├── uv.lock             # 依赖锁定文件
└── README.md           # 项目说明文档
```

## ⚠️ 免责声明

本项目的预测结果和分析图表仅供**学习和研究**使用，**不构成任何投资建议**。股市有风险，投资需谨慎。作者不对使用本程序产生的任何盈亏负责。
